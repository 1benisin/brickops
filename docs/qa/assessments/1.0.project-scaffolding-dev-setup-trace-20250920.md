# Requirements Traceability Matrix

## Story: 1.0.project-scaffolding-dev-setup - Project Scaffolding and Development Environment Setup

### Coverage Summary

- Total Requirements: 9
- Fully Covered: 0 (0%)
- Partially Covered: 4 (44%)
- Not Covered: 5 (56%)

### Requirement Mappings

#### 1.0.1: Create new Next.js 14+ project with TypeScript and Tailwind CSS configuration

- Coverage: PARTIAL (unit + e2e)
- Test Mappings:
  - `__tests__/frontend/home-page.test.tsx` – "renders hero content"
    - Given: The Next.js home page component and design tokens
    - When: Rendering the component in a jsdom environment
    - Then: Hero headline and marketing copy render successfully
    - Coverage: unit
  - `__tests__/e2e/home.spec.ts` – "displays hero copy"
    - Given: A browser session pointed at the site root
    - When: Navigating to `/`
    - Then: The hero heading is visible to the user
    - Coverage: integration
- Gap Notes: No automated verification of Tailwind CSS configuration or enforcement of Next.js 14+ runtime.

#### 1.0.2: Install and configure Convex backend with proper schema initialization

- Coverage: PARTIAL (unit)
- Test Mappings:
  - `__tests__/backend/hello.test.ts` – "greets the requester"
    - Given: The Convex hello implementation imported via `@/convex` alias
    - When: Invoking `helloImpl` with a sample tenant name
    - Then: A formatted Convex greeting string is returned
    - Coverage: unit
- Gap Notes: No tests exercise the Convex schema, server initialization, or authenticated function execution paths.

#### 1.0.3: Set up pnpm workspace with appropriate package.json scripts (dev, build, test, lint)

- Coverage: NONE
- Test Mappings: _No automated tests found._
- Gap Notes: Need validation that `pnpm` scripts execute successfully (dev/build/test/lint) in CI or automated smoke checks.

#### 1.0.4: Configure development environment with hot reloading for both frontend and backend

- Coverage: NONE
- Test Mappings: _No automated tests found._
- Gap Notes: Hot reloading behavior is currently validated manually; consider adding smoke tests or watcher integration checks.

#### 1.0.5: Set up initial project folder structure following architecture specifications

- Coverage: NONE
- Test Mappings: _No automated tests found._
- Gap Notes: No assertions ensure the repository structure stays aligned with `unified-project-structure.md`.

#### 1.0.6: Configure TypeScript strict mode and path aliases for clean imports

- Coverage: PARTIAL (unit)
- Test Mappings:
  - `__tests__/backend/hello.test.ts` – "greets the requester"
    - Given: Vitest running with TypeScript transpilation and path aliases
    - When: Importing `helloImpl` through `@/convex/functions`
    - Then: The module resolves and executes without path errors
    - Coverage: unit
- Gap Notes: Strict-mode enforcement and shared type contracts are not asserted by automated checks.

#### 1.0.7: Set up ESLint, Prettier, and development quality tools

- Coverage: NONE
- Test Mappings: _No automated tests found._
- Gap Notes: Linting/formatting tools are configured but lack enforced CI automation.

#### 1.0.8: Create initial environment variable configuration files (.env templates)

- Coverage: NONE
- Test Mappings: _No automated tests found._
- Gap Notes: Environment templates are documented but not validated for required keys or runtime wiring.

#### 1.0.9: Verify local development server runs successfully on both desktop and mobile browsers

- Coverage: PARTIAL (e2e)
- Test Mappings:
  - `__tests__/e2e/home.spec.ts` – "displays hero copy"
    - Given: A Playwright desktop browser session
    - When: Loading the home page
    - Then: The hero heading is visible, indicating the dev server responds
    - Coverage: integration
- Gap Notes: No automated viewport coverage for mobile form factors; mobile verification remains manual.

### Critical Gaps

1. **Failure to validate pnpm workflow scripts (AC 1.0.3)**
   - Risk: Medium – regressions in build/test scripts could halt onboarding
   - Action: Add CI job that executes `pnpm lint`, `pnpm test`, and `pnpm build`
2. **Hot reload behavior lacks automated verification (AC 1.0.4)**
   - Risk: Medium – dual-server workflow may silently break
   - Action: Introduce smoke test exercising concurrent dev servers or document manual checklist
3. **Repository structure drift monitoring absent (AC 1.0.5)**
   - Risk: Low – structure is stable today but could erode without checks
   - Action: Add unit test or script that asserts critical directories/files exist
4. **Tooling enforcement missing for lint/format (AC 1.0.7)**
   - Risk: Medium – inconsistent code quality if hooks/CI not enforced
   - Action: Wire lint/format scripts into CI and husky pre-commit
5. **Environment variables unvalidated (AC 1.0.8)**
   - Risk: Medium – misconfigured .env could break Convex/Next.js boot
   - Action: Add runtime schema validation (e.g., Zod) and integration test covering required keys

### Test Design Recommendations

1. Add CI pipeline steps that execute `pnpm lint`, `pnpm test`, and `pnpm build` to validate workspace scripts.
2. Introduce a lightweight integration test (or Playwright smoke) that runs against mobile viewport presets to cover AC 1.0.9.
3. Implement configuration validation using Zod or envsafe and exercise it in unit tests to ensure required environment variables exist.
4. Consider writing a guard test (or script) that asserts key folders/files (e.g., `convex/schema.ts`, `src/app`) exist to catch structural regressions.
5. Automate lint/format enforcement via husky + lint-staged or GitHub Actions to prevent tooling drift.

### Risk Assessment

- **High Risk:** None identified
- **Medium Risk:** AC 1.0.3 (scripts), AC 1.0.4 (hot reload), AC 1.0.7 (tooling enforcement), AC 1.0.8 (env validation), AC 1.0.9 (mobile coverage)
- **Low Risk:** AC 1.0.1 (Next.js scaffold), AC 1.0.2 (Convex hello), AC 1.0.5 (structure), AC 1.0.6 (path alias)
