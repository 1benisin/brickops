# Story 1.0: Project Scaffolding and Development Environment Setup

## Status

Draft

## Story

**As a** development team,
**I want** a properly configured Next.js + Convex project with all development tools,
**so that** we can start building features with consistent tooling and best practices.

## Acceptance Criteria

1. **1.0.1:** Create new Next.js 14+ project with TypeScript and Tailwind CSS configuration
2. **1.0.2:** Install and configure Convex backend with proper schema initialization
3. **1.0.3:** Set up pnpm workspace with appropriate package.json scripts (dev, build, test, lint)
4. **1.0.4:** Configure development environment with hot reloading for both frontend and backend
5. **1.0.5:** Set up initial project folder structure following architecture specifications
6. **1.0.6:** Configure TypeScript strict mode and path aliases for clean imports
7. **1.0.7:** Set up ESLint, Prettier, and development quality tools
8. **1.0.8:** Create initial environment variable configuration files (.env templates)
9. **1.0.9:** Verify local development server runs successfully on both desktop and mobile browsers

## Tasks / Subtasks

- [ ] Task 1: Initialize Next.js 14+ Project with TypeScript and Tailwind (AC: 1.0.1)

  - [ ] Create new Next.js 14+ project with TypeScript template
  - [ ] Install and configure Tailwind CSS 3.4.0+ with proper config
  - [ ] Verify TypeScript 5.3.3+ is installed and configured
  - [ ] Test basic Next.js app renders correctly

- [ ] Task 2: Install and Configure Convex Backend (AC: 1.0.2)

  - [ ] Install Convex latest version
  - [ ] Initialize Convex project with `npx convex init`
  - [ ] Set up initial schema.ts file in convex/ directory
  - [ ] Configure Convex environment and verify connection
  - [ ] Test basic Convex function creation and execution

- [ ] Task 3: Set up pnpm Workspace and Package Scripts (AC: 1.0.3)

  - [ ] Initialize pnpm workspace with pnpm-workspace.yaml
  - [ ] Configure package.json with dev, build, test, lint scripts
  - [ ] Install pnpm 8.15.0+ and verify workspace configuration
  - [ ] Test all package.json scripts execute correctly

- [ ] Task 4: Configure Development Environment with Hot Reloading (AC: 1.0.4)

  - [ ] Configure Next.js dev server for hot reloading
  - [ ] Configure Convex dev server for real-time updates
  - [ ] Set up concurrent development script to run both servers
  - [ ] Verify hot reloading works for both frontend and backend changes

- [ ] Task 5: Implement Project Folder Structure (AC: 1.0.5)

  - [ ] Create convex/ directory with functions/, http.ts, crons.ts, schema.ts
  - [ ] Create src/ directory with app/, components/, hooks/, lib/, middleware.ts
  - [ ] Create public/, **tests**/, docs/, scripts/ directories
  - [ ] Set up package.json, pnpm-workspace.yaml, README.md
  - [ ] Verify folder structure matches unified-project-structure.md exactly

- [ ] Task 6: Configure TypeScript and Path Aliases (AC: 1.0.6)

  - [ ] Enable TypeScript strict mode in tsconfig.json
  - [ ] Configure path aliases (@/ for src/, @/convex for convex/)
  - [ ] Set up shared TypeScript types between frontend and backend
  - [ ] Verify TypeScript compilation works without errors

- [ ] Task 7: Set up Development Quality Tools (AC: 1.0.7)

  - [ ] Install and configure ESLint with appropriate rules
  - [ ] Install and configure Prettier for code formatting
  - [ ] Set up pre-commit hooks for linting and formatting
  - [ ] Configure editor integration for consistent development experience

- [ ] Task 8: Create Environment Configuration (AC: 1.0.8)

  - [ ] Create .env.local.example template with required Convex variables
  - [ ] Create .env.local with actual development configuration
  - [ ] Document environment setup process in README
  - [ ] Add .env files to .gitignore appropriately

- [ ] Task 9: Verify Development Server and Cross-Browser Compatibility (AC: 1.0.9)
  - [ ] Start development server and verify it runs on localhost
  - [ ] Test application loads correctly in desktop browsers
  - [ ] Test application loads correctly in mobile browsers
  - [ ] Verify responsive design works across different screen sizes

## Dev Notes

### Previous Story Insights

No previous story exists - this is the foundation story for the project.

### Tech Stack Configuration

[Source: architecture/tech-stack.md]

- **Language:** TypeScript 5.3.3+ for strong typing essential for inventory/order data structures
- **Runtime:** Node.js 20.11.0 LTS for stability and performance
- **Frontend:** Next.js 14.1.0+ with App Router for SSR/SSG and mobile-first UI
- **Backend:** Convex (latest) for serverless backend with real-time database
- **Styling:** Tailwind CSS 3.4.0+ for utility-first CSS and rapid UI development
- **Package Manager:** pnpm 8.15.0+ for fast, efficient, monorepo-friendly package management

### Project Structure Requirements

[Source: architecture/unified-project-structure.md]

```text
brickops/
├── convex/                         # Convex backend functions and schema
│   ├── functions/                  # Business logic functions
│   ├── http.ts                     # HTTP actions
│   ├── crons.ts                    # Scheduled functions
│   └── schema.ts                   # Database schema
├── src/                            # Next.js frontend application
│   ├── app/                        # App Router (Next.js 14+)
│   ├── components/                 # Reusable UI components
│   ├── hooks/                      # Custom React hooks
│   ├── lib/                        # Utilities and configs
│   └── middleware.ts               # Route protection
├── public/                         # Static assets
├── __tests__/                      # Tests (unit/integration/e2e)
├── docs/                           # Documentation
├── scripts/                        # Build and utility scripts
├── package.json                    # Dependencies and scripts
├── pnpm-workspace.yaml             # Monorepo workspace configuration
└── README.md                       # Project documentation
```

### TypeScript Configuration Requirements

[Source: architecture/coding-standards.md]

- Configure TypeScript strict mode for type safety
- Set up path aliases for clean imports (@/ for src/, @/convex for convex/)
- Use shared types across frontend/backend
- Follow naming conventions: PascalCase for React components, camelCase for hooks with 'use' prefix

### Development Workflow Configuration

[Source: architecture/development-workflow.md]

- Must support hot reloading for both Next.js frontend and Convex backend
- Development environment should run both servers concurrently
- Environment variables must be properly configured for local development

### Testing Framework Setup

[Source: architecture/testing-strategy.md]
Initial testing infrastructure setup requirements:

- Frontend Testing: Jest + React Testing Library for unit tests
- Backend Testing: Vitest for Convex function testing
- E2E Testing: Playwright for end-to-end testing including camera flows
- Test organization in **tests**/ directory with proper structure
- Test coverage goals: 80% unit, 60% integration, 100% for critical paths

### Package.json Scripts Requirements

Required scripts for development workflow:

- `dev`: Start development servers for both frontend and backend
- `build`: Production build process
- `test`: Run test suites
- `lint`: Run ESLint checks
- Additional utility scripts as needed

### Environment Variables Configuration

[Source: architecture/development-workflow.md]

- NEXT_PUBLIC_CONVEX_URL for Convex connection
- Additional environment variables as defined in development workflow
- .env.local.example template for easy developer onboarding
- Proper .gitignore configuration for environment files

### Critical Rules to Follow

[Source: architecture/coding-standards.md]

- External API calls go through service layer with rate limiting
- Never mutate state directly; follow React/Zustand patterns
- Use shared types across frontend/backend
- All Convex functions validate authentication and tenant access
- Use structured error objects and consistent logging

### File Locations

- Main configuration files: package.json, tsconfig.json, tailwind.config.js, next.config.js in root
- Convex configuration: convex/ directory with schema.ts, functions/, http.ts, crons.ts
- Frontend code: src/ directory following Next.js App Router structure
- Tests: **tests**/ directory with organized subdirectories
- Environment templates: .env.local.example in root

## Testing

### Testing Standards

[Source: architecture/testing-strategy.md]

- **Test File Locations:** **tests**/ directory with organized structure by domain
- **Frontend Testing:** Jest + React Testing Library for component unit tests
- **Backend Testing:** Vitest for Convex function testing with convex-test framework
- **Test Organization:** Separate directories for components/, hooks/, services/, utils/
- **Initial Setup:** Create example test files demonstrating testing patterns
- **Coverage:** Configure test coverage reporting with appropriate thresholds
- **CI Integration:** Set up continuous integration test running in development pipeline

## Change Log

| Date       | Version | Description            | Author             |
| ---------- | ------- | ---------------------- | ------------------ |
| 2025-01-20 | 1.0     | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used

_To be populated by dev agent during implementation_

### Debug Log References

_To be populated by dev agent during implementation_

### Completion Notes List

_To be populated by dev agent during implementation_

### File List

_To be populated by dev agent during implementation_

## QA Results

_To be populated by QA agent during review_
